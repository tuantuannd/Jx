陷阱魔法 需要提供最大技能时间和数量的限制

子弹只有32个方向运动 offset用于纪录步长而已
将玩家的发送指令转化为向某个格子发子弹
碰撞检查通过以格子为单位检测

技能魔法按类型分成多种
	SS_Missles = 0,			//	子弹类		本技能用于发送子弹类
	SS_InitiativeNpcState,	//	主动类		本技能用于改变当前Npc的主动状态
	SS_PassivityNpcState,	//	被动类		本技能用于改变Npc的被动状态
	SS_CreateNpc,			//	产生Npc类	本技能用于生成一个新的Npc
	SS_BuildPoison,			//	炼毒类		本技能用于炼毒
	SS_AddPoison,			//	加毒类		本技能用于给武器加毒性
	SS_GetObjDirectly,		//	取物类		本技能用于隔空取物
	SS_StrideObstacle ,		//	跨越类		本技能用于跨越障碍
	SS_BodyToObject,		//	变物类		本技能用于将尸体变成宝箱
	SS_Mining,				//	采矿类		本技能用于采矿随机生成矿石
	SS_RepairWeapon,		//	修复类		本技能用于修复装备
	SS_Capture,				//	捕捉类		本技能用于捕捉动物Npc

	关于子弹类的分析：
	流程分析如下:
	客户端在屏幕X，Y处点技能施法，客户端首先根据当前的X，Y转化为实际点坐标，并根据当前魔法的特殊性质
	处理数据，将最终数据传给服务器端以及客户端。

KMissle的加载管理
KMissleSet管理功能
KMissle的显示管理

公式解式器



KSkill  技能类
功能发动某个技能，技能包括若干种如上表。
对于子弹类型发送的，根据


近身功饥
数值计算环节


子弹的简单版本，将会降低子弹的处理方式，即变为
根据玩家的目的地指向确认是否可以顺利到达，是否会变事先碰撞，如果有则设置最终实际的目的点。
再计算到达实际最终目的地需要的时间帧后，使服务器在时间帧时刻到达到检测碰撞，并处理数值计算等问题.

近身攻击为也为子弹，向前飞的过程
某些子弹在生成后并不立即飞行，需要设置其真正飞行时的时间。
//---------------------------------------------------------------------------
02.7.22
子单的数值计算

技能效果包括



1技能系统目前对于子弹系统还缺少子弹发出时产生对环境的影响效果
缺少另一类类式于播放某段固定动画的技能
技能是否需要重要整理成，基于消息机制的魔法系统？

子弹产生后会产生其它附加的东西，如残渣等.
子弹动画播放也分时段 ok!
物理攻击技能与子弹技能在计算以及其它方面有不同，需要重新考虑一下 

物件也可发魔法！ 8月19日已搞定.

技能传给系统的路经为绝对路经！需要修改; ok!
需要将子弹的显示方向由MissleRes管理;    ok!

Index 0号是无效的，需更改 

抛物线魔法一方面改掉报错的问题
另一方面改掉与高度有关的问题
再一方面上升与下落时间需要一致的问题

区域魔法垂直于玩家方行

消亡与撞击之后应该有动画! 

碰撞时以子单一个格子，碰撞后再影响大的区域. ok!

8月20日一个子单单一飞行时，精确致导


子单掉下来，C

技能加载代码未写完整。需增加KCore.cpp g_IniCore();

需增加必中魔法，也就是延时几帧后告诉已打中对方的魔法。 

原形区域 ok!


转来的子弹ET值还需要作一下Random的随机值处理 


需要解决的问题

碰撞问题 
必中魔法


CastZone  Value1 = 0 矩形   nValue1 = 1 圆形
CastLine  Value1  子弹之间的间隔，像素点
CastWall Value1 = 子弹之间的距离 像素点
CastCirle Value1 = 0 表示以发送者为圆心，否则以目标点为圆心
CastSpread Value1  子弹相差的角度 以360/64度为单位 Value2 第一步的长度 子弹刚发出时离玩家的距离

需要的工作分为

1、Npc脚本及加载
2、技能计算
3、Npc编缉器
4、角色状态
5、技能列表初始化 ok


主角登入是按照这样的步骤

1.检查所有相关子服务器中是否已存在该Id的主角在用，如果有则通知客户端请稍等
2、直到子服务器中玩家不存在了才可登入，因为
出现刚才现象有几种可能性
一是一个帐号多玩家玩
二是该帐号的玩家断线后再连时，子服务器未发现玩家已断线，此时必须等到子服务器发现断线后才能连上
否则会有漏洞。
子服务器发现人物断线后会将该玩家的当前信息保存至数据库服务器中.
登入时玩


/*********************************************************************************
									技能系统表格填写
***********************************************************************************************/
常用子弹
物理技能填写时，子弹选择一个无文件的就可，可是子弹伤害加上magic_physicsenhance_p = 0表示,100%的物理攻击
ManyAttack多击魔法，注意的是，CharAnimId 为19, 此时,childskillid为实际发出的魔法的id, MslsGenerate及MslsData数据填写了该多击魔法相隔攻击的时间。
RunAttack跑打魔法，注意的是，CharAnimId为18.此时的childskillid为实际发出魔法的id
光环魔法，注意的是，在填写时要填清StateSpecialId,装态的id
主动辅助技能在发送时，必须指定对象，不能空发。


//
如何将Skill与Missle完美的处理好？
处理这样的情况
一个动画


"IsPhysical" 是否为物理技能
03.01.14
//物理攻击
1、物理攻击与武器类别之间的关系表 
根据当前物件系统的设计，该关系表，包括三项，如下例

/*
具体类别	详细类别	对应物理技能	
0			1			1
0			2			2
0			3			4
1			1			6
2			2			8
						(表项具体名待定)
						*/
被动辅助技能
MagicAttrib.Value1	数值
MagicAttrib.Value2	时间
MagicAttrib.Value3	-1,为全部物理技能，-2表示，1…N表示所某个武器类别

2、被动辅助技能与技能的关系
设计时有两种
其一:辅助技能与Npc之间的关系，即调整Npc的当前数值
其二:辅助技能与物理攻击之间的关系，即调整当前Npc某个物理技能伤害的数值.

技能表加两项
Param1 ,Param2
Param1表示该技能对应的

3、当玩家换武器时，自动更新当前物理攻击技能号.
4、显示环节
	所有物理攻击只对应一个小图标，在SkillList里存在，但是不显示出来
	只有在选择左右键技能时显示出来.
	技能左右键设计时存在三个模式，只能右键，左右键皆不可，左右键都可三种，

5、发送技能时，传给服务器的是实际的技能号
6、当玩家选择技能时，显示的技能数据是否需要根据当前拥有的辅助技能重新计算一次.







	"MissleName":	子弹元素名
	"MissleHeight":	子弹高度
	"LifeTime":子弹的生命期长度，帧数
	"Speed":子弹飞行的速度，单位为点
	"ResponseSkill":相对应的技能号
	"CollidRange"：子弹的碰撞范围，用于检测子弹与对象碰撞时用。
	"ColVanish"：子弹碰撞后，是否会立即消失

	"CanSlow":子弹是否会受减速效果的影响.
	"IsRangeDmg":是否碰撞后，处理伤害是否区域伤害。
	"DmgRange"：碰撞后，处理伤害时，伤害的范围，单位是格子。
	"MoveKind"：子弹移动类型   ,包括如下几种
		MISSLE_MMK_Stand = 0						//	原地
		MISSLE_MMK_Line,							//	直线飞行
		MISSLE_MMK_Random,							//	随机飞行（暗黑二女巫的Charged Bolt）
		MISSLE_MMK_Circle,							//	环行飞行（围绕在身边，暗黑二刺客的集气）
		MISSLE_MMK_Helix,							//	阿基米德螺旋线（暗黑二游侠的Bless Hammer）
		MISSLE_MMK_Follow,							//	跟踪目标飞行
		MISSLE_MMK_Motion,							//	玩家动作类
		MISSLE_MMK_Parabola,						//	抛物线
		
	"FollowKind":如果子弹是跟踪类型，则跟踪对象类型
		MISSLE_MFK_None,							//	不跟随任何物件
		MISSLE_MFK_NPC,								//	跟随NPC或玩家
		MISSLE_MFK_Missle,							//	跟随子弹
	
	
	"Param1" "Param2" "Param3":子弹的三个参数。根据不同移动类型，参数的意义也不一样。
	MISSLE_MMK_Helix:
	MISSLE_MMK_Circle:
		Param1 = 1 表示顺时针转, Param1 = 0 表示逆时间转
		Param2 = 1 表示子弹在原地打转， Param2 = 0  表示子弹绕发送者转

	"MultiShow":	是否显示时多子弹样式显示。通过设置它。让相同的子弹元素Spr显示不同;
	
	AnimFile1~4:子弹在发送后不同状态时的动画Spr文件名.带相对路经
	AnimFileInfo1~4:子弹在发送后不同状态时的动画Spr文件的信息. 格式:"总共帧,方向数，帧间隔"
	SndFile1~4:	子弹在发送后不同状态时的音效文件名.带相对路经
	四个状态分别为
	MS_DoWait,		等待状态
	MS_DoFly,		飞行状态
	MS_DoVanish,	消亡状态
	MS_DoCollision,	碰撞状态

	"LoopPlay":子弹在飞行状态时，动画播放有两种方式
	一、播放速度根据子弹的生命时间确定，帧数率 = 生命时间/ 动画单方向总帧数 
	。此时LoopPlay = 0;
	二、播放速度等于AnimFileInfo信息中的帧速率。当动画播放完一次后，继续循环播放.
	循环播放还有两种情况，
	1、每次都是从头播到尾然后往复。(SubLoop = 0)
	2、循环播放只是从某一帧开始，到另一帧往复。此进(SubLoop要为1, SubStart = 开始循环时的帧,SubStop = 循环的最后一帧)
	
	"SubLoop"
	"SubStart"
	"SubStop"

技能信息的显示

技能的说明显示分两个情况，一种是在技能界面（大界面，可投点的那个），一种是在技能快捷选择界面，分别说明，
1。在技能选择的快捷界面，即鼠标停留在武功小图标上的时候，浮现的说明包括：
	a.技能名称。
	b.技能调用的数值脚本中包含的魔法属性在该等级下的具体显示。
2。在技能界面，浮现的说明包括：
	a.技能名称。
	b.技能的文字说明，即skilldesc的内容。
	c.技能调用的数值脚本中包含的魔法属性在该等级下的具体显示。
	d.技能调用的数值脚本中包含的魔法属性在下一等级下的数值具体显示，用红色表示区别。

技能升级的限制
1。所有能够加点的技能，最高只能加到20级。
2。假设一个玩家的等级是x,一个技能的基本学习等级是y，那么他能够学习这个技能的最高等级是x-y。
3。使用技能需要加入一些情况的判断，第一，是否是骑马状态；第二，他装备的武器的详细类别是否为指定数值，-1表示没有需求。





//子弹在高于一定高度时，不处理越界碰撞问题 现在是20












